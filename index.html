<!DOCTYPE html>
<html>
<head>
    <title>Device Orientation Data</title>
</head>
<body>

    <p>Device Orientation:</p>
    <p>x: <span id="x"></span></p>
    <p>y: <span id="y"></span></p>
    <p>z: <span id="z"></span></p>

    <button id="sendData">Send Data</button>

    <script>
        window.addEventListener('deviceorientation', (event) => {
            document.getElementById('x').textContent = event.alpha;
            document.getElementById('y').textContent = event.beta;
            document.getElementById('z').textContent = event.gamma;
        });

        document.getElementById('sendData').addEventListener('click', () => {
            const x = document.getElementById('x').textContent;
            const y = document.getElementById('y').textContent;
            const z = document.getElementById('z').textContent;

            fetch('/send_data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ x, y, z })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log('Success:', data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>

</body>
</html>